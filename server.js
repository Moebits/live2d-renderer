(()=>{"use strict";var e={"./demo/server.ts":function(e,r,t){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const o=n(t("path")),i=n(t("cors")),s=n(t("fs")),d=n(t("express")),a=n(t("webpack")),c=n(t("./webpack.config.js")),l=n(t("webpack-dev-middleware")),u=n(t("webpack-hot-middleware")),p=n(t("dotenv")),f=o.default.resolve();p.default.config();const h=(0,d.default)();let m=(0,a.default)(c.default);h.use(d.default.urlencoded({extended:!0,limit:"1gb",parameterLimit:5e4})),h.use(d.default.json({limit:"1gb"})),h.use((0,i.default)({credentials:!0,origin:!0})),h.disable("x-powered-by"),h.set("trust proxy",!0),"yes"===process.env.TESTING&&(h.use((0,l.default)(m,{index:!1,serverSideRender:!1,writeToDisk:!1})),h.use((0,u.default)(m))),h.use(d.default.static(o.default.join(f,"./dist"),{index:!1})),h.use("/assets",d.default.static(o.default.join(f,"./assets"))),h.use("/models",d.default.static(o.default.join(f,"./models"))),h.get("/*",(function(e,r,t){const n=s.default.readFileSync(o.default.join(f,"./dist/index.html"),{encoding:"utf-8"});r.status(200).send(n)}));(async()=>{let e=process.env.PORT||8090;h.listen(e,(()=>console.log(`Started the webserver at http://localhost:${e}`)))})()},"./webpack.config.js":(e,r,t)=>{const n=t("html-webpack-plugin"),o=t("fork-ts-checker-webpack-plugin"),i=t("mini-css-extract-plugin"),s=t("terser-webpack-plugin"),d=t("webpack-node-externals"),a=(t("copy-webpack-plugin"),t("webpack")),c=t("path"),l=t("dotenv-webpack");let u=[/node_modules/,/dist/],p=[...u,/server.ts/,/routes/];e.exports=[{target:"web",entry:"./demo/demo",mode:"production",node:{__dirname:!1},output:{publicPath:"/",globalObject:"this",filename:"script.js",chunkFilename:"[id].js",path:c.resolve(__dirname,"./dist")},resolve:{extensions:[".js",".jsx",".ts",".tsx"],alias:{"react-dom$":"react-dom/profiling","scheduler/tracing":"scheduler/tracing-profiling"},fallback:{fs:!1,path:"path-browserify",crypto:"crypto-browserify",stream:"stream-browserify",assert:"assert/",zlib:"browserify-zlib",buffer:"buffer/",url:"url/"}},performance:{hints:!1},optimization:{minimize:!1,minimizer:[new s({extractComments:!1})],moduleIds:"named"},module:{rules:[{test:/\.(jpe?g|png|gif|webp|svg|mp3|wav|mp4|webm|ttf|otf|pdf|txt|svg|zip)$/,exclude:p,use:[{loader:"file-loader",options:{name:"[path][name].[ext]"}}]},{test:/\.(txt|sql)$/,exclude:p,use:["raw-loader"]},{test:/\.html$/,exclude:p,use:[{loader:"html-loader",options:{minimize:!1,sources:!1}}]},{test:/\.less$/,exclude:p,use:[{loader:i.loader,options:{hmr:!0}},"css-loader",{loader:"less-loader"}]},{test:/\.css$/,exclude:p,use:[{loader:i.loader},"css-loader"]},{test:/\.(tsx?|jsx?)$/,exclude:p,use:[{loader:"ts-loader",options:{transpileOnly:!0}}]}]},plugins:[new l,new o({typescript:{memoryLimit:8192}}),new a.HotModuleReplacementPlugin,new i({filename:"styles.css",chunkFilename:"[id].css"}),new n({template:"./demo/demo.html",publicPath:"yes"===process.env.TESTING?"/":"/live2d-renderer",minify:!1}),new a.ProvidePlugin({Buffer:["buffer","Buffer"]}),new a.ProvidePlugin({process:"process/browser"})]},{target:"node",entry:"./demo/server",mode:"production",node:{__dirname:!1},externals:[d()],output:{filename:"server.js",chunkFilename:"[id].js",path:c.resolve(__dirname,"./dist")},resolve:{extensions:[".js",".jsx",".ts",".tsx"]},performance:{hints:!1},optimization:{minimize:!0,minimizer:[new s({extractComments:!1})],moduleIds:"named"},module:{rules:[{test:/\.(jpe?g|png|webp|gif|svg|mp3|wav|mp4|webm|ttf|otf|pdf|txt|svg|zip)$/,exclude:u,use:[{loader:"file-loader",options:{name:"[path][name].[ext]"}}]},{test:/\.(txt|sql)$/,exclude:u,use:["raw-loader"]},{test:/\.html$/,exclude:u,use:[{loader:"html-loader",options:{minimize:!1}}]},{test:/\.less$/,exclude:u,use:[{loader:i.loader,options:{hmr:!0}},"css-loader",{loader:"less-loader"}]},{test:/\.css$/,exclude:u,use:[{loader:i.loader,options:{hmr:!0}},"css-loader"]},{test:/\.(tsx?|jsx?)$/,exclude:u,use:[{loader:"ts-loader",options:{transpileOnly:!0}}]}]},plugins:[new l,new o,new a.HotModuleReplacementPlugin,new i({filename:"styles.css",chunkFilename:"[id].css"})]}]},"assert/":e=>{e.exports=require("assert/")},"browserify-zlib":e=>{e.exports=require("browserify-zlib")},"buffer/":e=>{e.exports=require("buffer/")},"copy-webpack-plugin":e=>{e.exports=require("copy-webpack-plugin")},cors:e=>{e.exports=require("cors")},"crypto-browserify":e=>{e.exports=require("crypto-browserify")},dotenv:e=>{e.exports=require("dotenv")},"dotenv-webpack":e=>{e.exports=require("dotenv-webpack")},express:e=>{e.exports=require("express")},"fork-ts-checker-webpack-plugin":e=>{e.exports=require("fork-ts-checker-webpack-plugin")},"html-webpack-plugin":e=>{e.exports=require("html-webpack-plugin")},"mini-css-extract-plugin":e=>{e.exports=require("mini-css-extract-plugin")},"path-browserify":e=>{e.exports=require("path-browserify")},"stream-browserify":e=>{e.exports=require("stream-browserify")},"terser-webpack-plugin":e=>{e.exports=require("terser-webpack-plugin")},"url/":e=>{e.exports=require("url/")},webpack:e=>{e.exports=require("webpack")},"webpack-dev-middleware":e=>{e.exports=require("webpack-dev-middleware")},"webpack-hot-middleware":e=>{e.exports=require("webpack-hot-middleware")},"webpack-node-externals":e=>{e.exports=require("webpack-node-externals")},fs:e=>{e.exports=require("fs")},path:e=>{e.exports=require("path")}},r={};function t(n){var o=r[n];if(void 0!==o){if(void 0!==o.error)throw o.error;return o.exports}var i=r[n]={exports:{}};try{var s={id:n,module:i,factory:e[n],require:t};t.i.forEach((function(e){e(s)})),i=s.module,s.factory.call(i.exports,i,i.exports,s.require)}catch(e){throw i.error=e,e}return i.exports}t.m=e,t.c=r,t.i=[],t.hu=e=>e+"."+t.h()+".hot-update.js",t.hmrF=()=>"main."+t.h()+".hot-update.json",t.h=()=>"960b2f1e39dd411433ee",t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e,r,n,o={},i=t.c,s=[],d=[],a="idle",c=0,l=[];function u(e){a=e;for(var r=[],t=0;t<d.length;t++)r[t]=d[t].call(null,e);return Promise.all(r)}function p(){0==--c&&u("ready").then((function(){if(0===c){var e=l;l=[];for(var r=0;r<e.length;r++)e[r]()}}))}function f(e){if("idle"!==a)throw new Error("check() is only allowed in idle status");return u("check").then(t.hmrM).then((function(n){return n?u("prepare").then((function(){var o=[];return r=[],Promise.all(Object.keys(t.hmrC).reduce((function(e,i){return t.hmrC[i](n.c,n.r,n.m,e,r,o),e}),[])).then((function(){return r=function(){return e?m(e):u("ready").then((function(){return o}))},0===c?r():new Promise((function(e){l.push((function(){e(r())}))}));var r}))})):u(v()?"ready":"idle").then((function(){return null}))}))}function h(e){return"ready"!==a?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status (state: "+a+")")})):m(e)}function m(e){e=e||{},v();var t=r.map((function(r){return r(e)}));r=void 0;var o=t.map((function(e){return e.error})).filter(Boolean);if(o.length>0)return u("abort").then((function(){throw o[0]}));var i=u("dispose");t.forEach((function(e){e.dispose&&e.dispose()}));var s,d=u("apply"),a=function(e){s||(s=e)},c=[];return t.forEach((function(e){if(e.apply){var r=e.apply(a);if(r)for(var t=0;t<r.length;t++)c.push(r[t])}})),Promise.all([i,d]).then((function(){return s?u("fail").then((function(){throw s})):n?m(e).then((function(e){return c.forEach((function(r){e.indexOf(r)<0&&e.push(r)})),e})):u("idle").then((function(){return c}))}))}function v(){if(n)return r||(r=[]),Object.keys(t.hmrI).forEach((function(e){n.forEach((function(n){t.hmrI[e](n,r)}))})),n=void 0,!0}t.hmrD=o,t.i.push((function(l){var m,v,w,b,y=l.module,x=function(r,t){var n=i[t];if(!n)return r;var o=function(o){if(n.hot.active){if(i[o]){var d=i[o].parents;-1===d.indexOf(t)&&d.push(t)}else s=[t],e=o;-1===n.children.indexOf(o)&&n.children.push(o)}else console.warn("[HMR] unexpected require("+o+") from disposed module "+t),s=[];return r(o)},d=function(e){return{configurable:!0,enumerable:!0,get:function(){return r[e]},set:function(t){r[e]=t}}};for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&"e"!==l&&Object.defineProperty(o,l,d(l));return o.e=function(e){return function(e){switch(a){case"ready":u("prepare");case"prepare":return c++,e.then(p,p),e;default:return e}}(r.e(e))},o}(l.require,l.id);y.hot=(m=l.id,v=y,b={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:w=e!==m,_requireSelf:function(){s=v.parents.slice(),e=w?void 0:m,t(m)},active:!0,accept:function(e,r,t){if(void 0===e)b._selfAccepted=!0;else if("function"==typeof e)b._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var n=0;n<e.length;n++)b._acceptedDependencies[e[n]]=r||function(){},b._acceptedErrorHandlers[e[n]]=t;else b._acceptedDependencies[e]=r||function(){},b._acceptedErrorHandlers[e]=t},decline:function(e){if(void 0===e)b._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var r=0;r<e.length;r++)b._declinedDependencies[e[r]]=!0;else b._declinedDependencies[e]=!0},dispose:function(e){b._disposeHandlers.push(e)},addDisposeHandler:function(e){b._disposeHandlers.push(e)},removeDisposeHandler:function(e){var r=b._disposeHandlers.indexOf(e);r>=0&&b._disposeHandlers.splice(r,1)},invalidate:function(){switch(this._selfInvalidated=!0,a){case"idle":r=[],Object.keys(t.hmrI).forEach((function(e){t.hmrI[e](m,r)})),u("ready");break;case"ready":Object.keys(t.hmrI).forEach((function(e){t.hmrI[e](m,r)}));break;case"prepare":case"check":case"dispose":case"apply":(n=n||[]).push(m)}},check:f,apply:h,status:function(e){if(!e)return a;d.push(e)},addStatusHandler:function(e){d.push(e)},removeStatusHandler:function(e){var r=d.indexOf(e);r>=0&&d.splice(r,1)},data:o[m]},e=void 0,b),y.parents=s,y.children=[],s=[],l.require=x})),t.hmrC={},t.hmrI={}})(),(()=>{var e,r,n,o,i=t.hmrS_require=t.hmrS_require||{179:1};function s(e,n){var i=require("./"+t.hu(e)),s=i.modules,d=i.runtime;for(var a in s)t.o(s,a)&&(r[a]=s[a],n&&n.push(a));d&&o.push(d)}function d(s){function d(e){for(var r=[e],n={},o=r.map((function(e){return{chain:[e],id:e}}));o.length>0;){var i=o.pop(),s=i.id,d=i.chain,c=t.c[s];if(c&&(!c.hot._selfAccepted||c.hot._selfInvalidated)){if(c.hot._selfDeclined)return{type:"self-declined",chain:d,moduleId:s};if(c.hot._main)return{type:"unaccepted",chain:d,moduleId:s};for(var l=0;l<c.parents.length;l++){var u=c.parents[l],p=t.c[u];if(p){if(p.hot._declinedDependencies[s])return{type:"declined",chain:d.concat([u]),moduleId:s,parentId:u};-1===r.indexOf(u)&&(p.hot._acceptedDependencies[s]?(n[u]||(n[u]=[]),a(n[u],[s])):(delete n[u],r.push(u),o.push({chain:d.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:r,outdatedDependencies:n}}function a(e,r){for(var t=0;t<r.length;t++){var n=r[t];-1===e.indexOf(n)&&e.push(n)}}t.f&&delete t.f.requireHmr,e=void 0;var c={},l=[],u={},p=function(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")};for(var f in r)if(t.o(r,f)){var h,m=r[f],v=!1,w=!1,b=!1,y="";switch((h=m?d(f):{type:"disposed",moduleId:f}).chain&&(y="\nUpdate propagation: "+h.chain.join(" -> ")),h.type){case"self-declined":s.onDeclined&&s.onDeclined(h),s.ignoreDeclined||(v=new Error("Aborted because of self decline: "+h.moduleId+y));break;case"declined":s.onDeclined&&s.onDeclined(h),s.ignoreDeclined||(v=new Error("Aborted because of declined dependency: "+h.moduleId+" in "+h.parentId+y));break;case"unaccepted":s.onUnaccepted&&s.onUnaccepted(h),s.ignoreUnaccepted||(v=new Error("Aborted because "+f+" is not accepted"+y));break;case"accepted":s.onAccepted&&s.onAccepted(h),w=!0;break;case"disposed":s.onDisposed&&s.onDisposed(h),b=!0;break;default:throw new Error("Unexception type "+h.type)}if(v)return{error:v};if(w)for(f in u[f]=m,a(l,h.outdatedModules),h.outdatedDependencies)t.o(h.outdatedDependencies,f)&&(c[f]||(c[f]=[]),a(c[f],h.outdatedDependencies[f]));b&&(a(l,[h.moduleId]),u[f]=p)}r=void 0;for(var x,g=[],k=0;k<l.length;k++){var _=l[k],q=t.c[_];q&&(q.hot._selfAccepted||q.hot._main)&&u[_]!==p&&!q.hot._selfInvalidated&&g.push({module:_,require:q.hot._requireSelf,errorHandler:q.hot._selfAccepted})}return{dispose:function(){var e;n.forEach((function(e){delete i[e]})),n=void 0;for(var r,o=l.slice();o.length>0;){var s=o.pop(),d=t.c[s];if(d){var a={},u=d.hot._disposeHandlers;for(k=0;k<u.length;k++)u[k].call(null,a);for(t.hmrD[s]=a,d.hot.active=!1,delete t.c[s],delete c[s],k=0;k<d.children.length;k++){var p=t.c[d.children[k]];p&&((e=p.parents.indexOf(s))>=0&&p.parents.splice(e,1))}}}for(var f in c)if(t.o(c,f)&&(d=t.c[f]))for(x=c[f],k=0;k<x.length;k++)r=x[k],(e=d.children.indexOf(r))>=0&&d.children.splice(e,1)},apply:function(e){for(var r in u)t.o(u,r)&&(t.m[r]=u[r]);for(var n=0;n<o.length;n++)o[n](t);for(var i in c)if(t.o(c,i)){var d=t.c[i];if(d){x=c[i];for(var a=[],p=[],f=[],h=0;h<x.length;h++){var m=x[h],v=d.hot._acceptedDependencies[m],w=d.hot._acceptedErrorHandlers[m];if(v){if(-1!==a.indexOf(v))continue;a.push(v),p.push(w),f.push(m)}}for(var b=0;b<a.length;b++)try{a[b].call(null,x)}catch(r){if("function"==typeof p[b])try{p[b](r,{moduleId:i,dependencyId:f[b]})}catch(t){s.onErrored&&s.onErrored({type:"accept-error-handler-errored",moduleId:i,dependencyId:f[b],error:t,originalError:r}),s.ignoreErrored||(e(t),e(r))}else s.onErrored&&s.onErrored({type:"accept-errored",moduleId:i,dependencyId:f[b],error:r}),s.ignoreErrored||e(r)}}}for(var y=0;y<g.length;y++){var k=g[y],_=k.module;try{k.require(_)}catch(r){if("function"==typeof k.errorHandler)try{k.errorHandler(r,{moduleId:_,module:t.c[_]})}catch(t){s.onErrored&&s.onErrored({type:"self-accept-error-handler-errored",moduleId:_,error:t,originalError:r}),s.ignoreErrored||(e(t),e(r))}else s.onErrored&&s.onErrored({type:"self-accept-errored",moduleId:_,error:r}),s.ignoreErrored||e(r)}}return l}}}t.hmrI.require=function(e,i){r||(r={},o=[],n=[],i.push(d)),t.o(r,e)||(r[e]=t.m[e])},t.hmrC.require=function(a,c,l,u,p,f){p.push(d),e={},n=c,r=l.reduce((function(e,r){return e[r]=!1,e}),{}),o=[],a.forEach((function(r){t.o(i,r)&&void 0!==i[r]?(u.push(s(r,f)),e[r]=!0):e[r]=!1})),t.f&&(t.f.requireHmr=function(r,n){e&&t.o(e,r)&&!e[r]&&(n.push(s(r)),e[r]=!0)})},t.hmrM=function(){return Promise.resolve().then((function(){return require("./"+t.hmrF())})).catch((function(e){if("MODULE_NOT_FOUND"!==e.code)throw e}))}})();t("./demo/server.ts")})();